(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{532:function(s,a,t){"use strict";t.r(a);var e=t(29),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[s._v("#")]),s._v(" pm2")]),s._v(" "),t("p",[s._v("pm2 主要为 linux 中 nodejs 的进程进行服务，接下来就统计一下它的指令都有哪些")]),s._v(" "),t("h3",{attrs:{id:"升级-pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#升级-pm2"}},[s._v("#")]),s._v(" 升级 PM2")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pm2@latest -g\n$ pm2 update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ cnpm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pm2 -g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 start app.js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动，守护进程和自动重启应用程序（node）")]),s._v("\n$ pm2 start app.py "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动，守护程序和自动重启应用程序（python）")]),s._v("\n$ pm2 start "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动，守护程序和自动重启节点应用程序")]),s._v("\n$ pm2 start bin/www --watch "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 koa 项目")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"停止"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#停止"}},[s._v("#")]),s._v(" 停止")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 stop all "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止所有应用程序")]),s._v("\n$ pm2 stop "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止进程 id 为 0 的应用程序")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"删除进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除进程"}},[s._v("#")]),s._v(" 删除进程")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 delete all "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杀死并删除所有应用程序")]),s._v("\n$ pm2 delete "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除进程 id 为 0 的应用程序")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"重启所有应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启所有应用程序"}},[s._v("#")]),s._v(" 重启所有应用程序")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("pm2 restart all\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"集群模式-仅限-nodejs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群模式-仅限-nodejs"}},[s._v("#")]),s._v(" 集群模式（仅限 Nodejs）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 start app.js -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在集群模式下启动 4 个应用程序 # 它将负载平衡每个应用程序的网络查询")]),s._v("\n$ pm2 reload all "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 零秒停机重启")]),s._v("\n$ pm2 scale "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 规模集群应用到 10 个进程")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"进程监控"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程监控"}},[s._v("#")]),s._v(" 进程监控")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出 pm2 的所有流程")]),s._v("\n$ pm2 monit "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个应用程序的内存和 cpu 使用情况")]),s._v("\n$ pm2 show "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示相关应用程序的所有信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"日志管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志管理"}},[s._v("#")]),s._v(" 日志管理")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 logs "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有应用程序的日志")]),s._v("\n$ pm2 logs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示特定应用程序的日志")]),s._v("\n$ pm2 logs --json "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志 json 格式化")]),s._v("\n$ pm2 flush\n$ pm2 reloadLogs\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"进程状态管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程状态管理"}},[s._v("#")]),s._v(" 进程状态管理")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pm2 start app.js --name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"api"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动应用程序，并将其命名为 “api”")]),s._v("\n$ pm2 start app.js --watch "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动文件，更改应用程序")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);